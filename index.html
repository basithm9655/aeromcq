<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#03070c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>AeroQuest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --safe-bottom: env(safe-area-inset-bottom, 16px);
            --safe-top: env(safe-area-inset-top, 16px);
            --neon: #00f0ff;
            --neon-dim: rgba(0,240,255,0.12);
            --danger: #ff2a2a;
            --success: #00ffaa;
            --dark: #03070c;
            --panel: rgba(10,20,40,0.75);
            --border: rgba(0,240,255,0.12);
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: #03070c;
            color: #e2e8f0;
            overflow: hidden;
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: pan-y;
            height: 100dvh;
            width: 100%;
        }

        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* ── GRID BACKGROUND ── */
        .grid-bg {
            position: fixed; inset: 0;
            background-image:
                linear-gradient(rgba(0,240,255,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,240,255,0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none; z-index: 0;
        }
        .grid-bg::after {
            content: '';
            position: fixed; inset: 0;
            background: radial-gradient(ellipse 80% 60% at 50% 40%, rgba(0,100,180,0.08) 0%, transparent 70%);
            pointer-events: none;
        }

        /* ── TYPOGRAPHY ── */
        .font-sci { font-family: 'Orbitron', sans-serif; }
        .neon-text { color: var(--neon); text-shadow: 0 0 12px rgba(0,240,255,0.6), 0 0 24px rgba(0,240,255,0.3); }
        .danger-text { color: var(--danger); text-shadow: 0 0 10px rgba(255,42,42,0.5); }
        .success-text { color: var(--success); text-shadow: 0 0 10px rgba(0,255,170,0.5); }

        /* ── GLASS PANEL ── */
        .glass {
            background: linear-gradient(135deg, rgba(12,22,44,0.85) 0%, rgba(3,7,12,0.97) 100%);
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
            border: 1px solid var(--border);
            box-shadow: 0 24px 48px -8px rgba(0,0,0,0.85), inset 0 0 24px rgba(0,240,255,0.04);
        }

        /* ── SCROLLBAR ── */
        .custom-scroll::-webkit-scrollbar { width: 3px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(0,240,255,0.2); border-radius: 4px; }
        .custom-scroll { scrollbar-width: thin; scrollbar-color: rgba(0,240,255,0.2) transparent; }

        /* ── HIDDEN ── */
        .hidden { display: none !important; }

        /* ── LOADER ── */
        #loader-overlay {
            position: fixed; inset: 0;
            background: rgba(3,7,12,0.97);
            backdrop-filter: blur(20px);
            z-index: 9000;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .loader-ring {
            width: 56px; height: 56px;
            border: 3px solid rgba(0,240,255,0.1);
            border-top-color: var(--neon);
            border-right-color: var(--neon);
            border-radius: 50%;
            animation: spin 1s cubic-bezier(0.68,-0.55,0.265,1.55) infinite;
        }
        .loader-ping {
            position: absolute;
            width: 80px; height: 80px;
            border-radius: 50%;
            border: 1px solid rgba(0,240,255,0.2);
            animation: ping 1.5s ease-out infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes ping { 0% { transform: scale(0.8); opacity: 1; } 100% { transform: scale(1.6); opacity: 0; } }

        /* ── BLUR WARNING (anti-cheat) ── */
        #blur-warning {
            position: fixed; inset: 0;
            background: rgba(3,7,12,0.99);
            backdrop-filter: blur(24px);
            z-index: 9999;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 2rem;
            text-align: center;
        }

        /* ── TOAST ── */
        #toast-container {
            position: fixed; top: 1rem; left: 50%; transform: translateX(-50%);
            z-index: 8000; display: flex; flex-direction: column; gap: 0.75rem;
            width: min(94vw, 420px); pointer-events: none;
        }
        .toast {
            border-radius: 1rem; padding: 0.875rem 1rem;
            display: flex; align-items: flex-start; gap: 0.75rem;
            backdrop-filter: blur(16px); pointer-events: auto;
            animation: toastIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275) forwards;
        }
        .toast.out { animation: toastOut 0.3s ease-in forwards; }
        @keyframes toastIn { from { transform: translateY(-120%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes toastOut { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-20px); opacity: 0; } }

        /* ── INPUT ── */
        .input-sci {
            background: rgba(8,14,26,0.7);
            border: 1.5px solid #1e293b;
            border-radius: 0.875rem;
            color: #fff;
            transition: border-color 0.3s, box-shadow 0.3s;
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            -webkit-user-select: text !important;
            user-select: text !important;
        }
        .input-sci:focus {
            outline: none;
            border-color: var(--neon);
            box-shadow: 0 0 0 3px rgba(0,240,255,0.1), 0 0 20px rgba(0,240,255,0.1);
            background: rgba(0,240,255,0.03);
        }
        .input-sci::placeholder { color: #2d4060; font-family: 'Orbitron', sans-serif; }

        /* ══════════════════════════════════════
           1. LOGIN SECTION
        ══════════════════════════════════════ */
        #login-section {
            position: absolute; inset: 0; z-index: 10;
            display: flex; align-items: center; justify-content: center;
            padding: 1rem;
        }
        .login-card {
            width: 100%; max-width: 420px;
            border-radius: 2rem;
            padding: clamp(1.5rem, 5vw, 2.5rem);
        }
        .login-badge {
            display: inline-flex; align-items: center; gap: 0.5rem;
            padding: 0.375rem 0.875rem;
            border-radius: 999px;
            border: 1px solid rgba(0,240,255,0.3);
            background: rgba(0,240,255,0.05);
            color: var(--neon);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.6rem; letter-spacing: 0.2em; text-transform: uppercase;
        }
        .badge-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--neon); animation: blink 2s ease-in-out infinite; }
        @keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.2; } }

        .btn-primary {
            width: 100%; padding: 1rem;
            border: 1.5px solid var(--neon);
            border-radius: 0.875rem;
            background: transparent;
            color: var(--neon);
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem; font-weight: 700;
            letter-spacing: 0.15em; text-transform: uppercase;
            cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 0.625rem;
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
            box-shadow: 0 0 16px rgba(0,240,255,0.08);
        }
        .btn-primary:hover { background: rgba(0,240,255,0.08); box-shadow: 0 0 24px rgba(0,240,255,0.18); }
        .btn-primary:active { transform: scale(0.97); }

        /* ══════════════════════════════════════
           2. QUIZ SECTION — DESKTOP SPLIT LAYOUT
        ══════════════════════════════════════ */
        #quiz-section {
            position: absolute; inset: 0; z-index: 10;
            display: flex;
        }

        /* ─ LEFT SIDEBAR (desktop only) ─ */
        .quiz-sidebar {
            width: 280px;
            flex-shrink: 0;
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
            padding: 1.75rem 1.5rem;
            gap: 1.5rem;
            background: linear-gradient(180deg, rgba(6,14,28,0.9) 0%, rgba(3,7,12,0.98) 100%);
        }

        .sidebar-logo {
            display: flex; flex-direction: column; gap: 0.375rem;
        }

        .candidate-card {
            border: 1px solid var(--border);
            border-radius: 1rem;
            padding: 1rem;
            background: rgba(0,240,255,0.03);
        }
        .candidate-status {
            width: 8px; height: 8px; border-radius: 50%;
            background: var(--success);
            box-shadow: 0 0 8px var(--success);
            animation: blink 3s ease-in-out infinite;
        }

        .timer-card {
            border: 1px solid rgba(0,240,255,0.2);
            border-radius: 1rem;
            padding: 1rem 1.25rem;
            background: rgba(0,240,255,0.04);
            text-align: center;
        }

        /* Question Map */
        .question-map {
            flex: 1; overflow-y: auto;
        }
        .question-map::-webkit-scrollbar { display: none; }
        .qmap-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.4rem;
            margin-top: 0.625rem;
        }
        .qmap-btn {
            aspect-ratio: 1;
            border-radius: 0.5rem;
            border: 1.5px solid #1e293b;
            background: rgba(15,23,42,0.5);
            color: #475569;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.6rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex; align-items: center; justify-content: center;
        }
        .qmap-btn.answered { border-color: rgba(0,240,255,0.5); background: rgba(0,240,255,0.1); color: var(--neon); }
        .qmap-btn.current { border-color: var(--neon); background: rgba(0,240,255,0.15); color: var(--neon); box-shadow: 0 0 10px rgba(0,240,255,0.25); }

        /* ─ RIGHT PANEL (main content) ─ */
        .quiz-main {
            flex: 1; display: flex; flex-direction: column;
            overflow: hidden;
            min-width: 0;
        }

        /* Mobile header (hidden on desktop) */
        .mobile-header {
            display: none;
            padding: 1rem 1.25rem 0.75rem;
            border-bottom: 1px solid rgba(255,255,255,0.06);
            flex-shrink: 0;
        }

        /* Progress bar */
        .progress-bar-wrap {
            padding: 0.75rem 1.5rem 0;
            flex-shrink: 0;
        }
        .progress-track {
            height: 3px; width: 100%;
            background: rgba(255,255,255,0.06);
            border-radius: 999px; overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--neon);
            box-shadow: 0 0 8px var(--neon);
            width: 0; transition: width 0.5s cubic-bezier(0.34,1.56,0.64,1);
        }

        /* Question area */
        .question-area {
            flex: 1; overflow-y: auto; min-height: 0;
            padding: 1.5rem 1.5rem 1rem;
            display: flex; flex-direction: column; gap: 1.25rem;
        }
        .question-card {
            border-left: 3px solid var(--neon);
            padding: 1.25rem 1.25rem 1.25rem 1.5rem;
            border-radius: 0 1rem 1rem 0;
            background: rgba(0,240,255,0.03);
            border-top: 1px solid rgba(0,240,255,0.08);
            border-right: 1px solid rgba(0,240,255,0.08);
            border-bottom: 1px solid rgba(0,240,255,0.08);
            flex-shrink: 0;
        }
        #question-text {
            font-size: clamp(1rem, 2vw, 1.15rem);
            line-height: 1.65; font-weight: 500; color: #e2e8f0;
        }
        #question-image {
            width: 100%; max-height: 220px; object-fit: contain;
            border-radius: 0.75rem; border: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.4); margin-bottom: 0.875rem;
        }

        /* Options */
        #options-container {
            display: flex; flex-direction: column; gap: 0.625rem;
            flex-shrink: 0;
        }
        .option-label { display: block; cursor: pointer; }
        .option-label:active .option-box { transform: scale(0.98); }
        .option-box {
            display: flex; align-items: center; gap: 0.875rem;
            padding: 0.875rem 1rem;
            border-radius: 0.875rem;
            border: 1.5px solid #1e293b;
            background: rgba(15,23,42,0.4);
            transition: border-color 0.22s, background 0.22s, box-shadow 0.22s, transform 0.15s;
            min-height: 56px;
        }
        .option-box:hover { border-color: rgba(0,240,255,0.3); background: rgba(0,240,255,0.04); }
        .option-input { display: none; }
        .option-input:checked + .option-box {
            border-color: var(--neon);
            background: rgba(0,240,255,0.09);
            box-shadow: inset 0 0 20px rgba(0,240,255,0.07), 0 4px 16px rgba(0,0,0,0.5);
        }
        .radio-outer {
            width: 20px; height: 20px; flex-shrink: 0;
            border-radius: 50%; border: 2px solid #334155;
            display: flex; align-items: center; justify-content: center;
            transition: border-color 0.22s, box-shadow 0.22s;
        }
        .radio-inner {
            width: 10px; height: 10px; border-radius: 50%;
            background: #334155; opacity: 0.5;
            transition: background 0.22s, opacity 0.22s, box-shadow 0.22s;
        }
        .option-input:checked + .option-box .radio-outer {
            border-color: var(--neon); box-shadow: 0 0 10px rgba(0,240,255,0.4);
        }
        .option-input:checked + .option-box .radio-inner {
            background: var(--neon); opacity: 1; box-shadow: 0 0 8px var(--neon);
        }
        .option-letter {
            font-family: 'Orbitron', sans-serif; font-size: 0.65rem;
            color: #475569; font-weight: 700; letter-spacing: 0.05em;
            min-width: 1.25rem; text-align: center;
            transition: color 0.22s;
        }
        .option-input:checked + .option-box .option-letter { color: var(--neon); }
        .option-text { font-size: 1rem; font-weight: 500; color: #cbd5e1; line-height: 1.4; }

        /* Footer nav */
        .quiz-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.06);
            display: flex; gap: 0.75rem;
            flex-shrink: 0;
            background: rgba(3,7,12,0.6);
            backdrop-filter: blur(8px);
        }
        .btn-nav {
            flex: 1; padding: 0.875rem;
            border-radius: 0.875rem;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.7rem; font-weight: 700;
            letter-spacing: 0.12em; text-transform: uppercase;
            cursor: pointer; transition: all 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 0.5rem;
        }
        .btn-nav:active { transform: scale(0.97); }
        .btn-prev {
            border: 1.5px solid #1e293b;
            background: rgba(15,23,42,0.5);
            color: #64748b;
        }
        .btn-prev:hover:not(:disabled) { border-color: #334155; color: #94a3b8; }
        .btn-prev:disabled { opacity: 0.35; cursor: not-allowed; }
        .btn-next {
            border: 1.5px solid rgba(0,240,255,0.4);
            background: rgba(0,240,255,0.05);
            color: var(--neon);
            flex: 2;
            box-shadow: 0 0 12px rgba(0,240,255,0.08);
        }
        .btn-next:hover { background: rgba(0,240,255,0.1); box-shadow: 0 0 20px rgba(0,240,255,0.15); }
        .btn-submit {
            border: 1.5px solid var(--neon);
            background: var(--neon);
            color: #03070c;
            flex: 2;
            box-shadow: 0 0 20px rgba(0,240,255,0.4);
        }
        .btn-submit:hover { box-shadow: 0 0 32px rgba(0,240,255,0.6); }
        .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; animation: none !important; }
        .btn-submit.pulse { animation: pulseSub 1.5s ease-in-out infinite; }
        @keyframes pulseSub {
            0%,100% { box-shadow: 0 0 20px rgba(0,240,255,0.4); }
            50% { box-shadow: 0 0 40px rgba(0,240,255,0.7); }
        }

        /* ══════════════════════════════════════
           3. RESULT SECTION
        ══════════════════════════════════════ */
        #result-section, #locked-section {
            position: absolute; inset: 0; z-index: 10;
            display: flex; align-items: center; justify-content: center;
            padding: 1.5rem;
        }
        .result-card, .locked-card {
            width: 100%; max-width: 420px;
            border-radius: 2rem; padding: clamp(1.5rem, 5vw, 2.5rem);
            text-align: center;
        }

        /* ══════════════════════════════════════
           TRANSITIONS
        ══════════════════════════════════════ */
        .section-fade { transition: opacity 0.4s ease; }

        /* ══════════════════════════════════════
           DESKTOP: show sidebar, tweak layout
        ══════════════════════════════════════ */
        @media (min-width: 768px) {
            .quiz-sidebar { display: flex; }
            .mobile-header { display: none !important; }
            .progress-bar-wrap { padding: 1rem 2rem 0; }
            .question-area { padding: 1.75rem 2rem 1.25rem; gap: 1.5rem; }
            .quiz-footer { padding: 1.25rem 2rem; }
        }

        /* ══════════════════════════════════════
           MOBILE: hide sidebar, show mobile header
        ══════════════════════════════════════ */
        @media (max-width: 767px) {
            .quiz-sidebar { display: none !important; }
            .mobile-header { display: flex !important; }
            .question-area { padding: 1rem 1rem 0.75rem; }
            .quiz-footer { padding: 0.75rem 1rem; gap: 0.5rem; }
            .progress-bar-wrap { padding: 0.625rem 1rem 0; }
            .btn-nav { padding: 0.75rem 0.5rem; font-size: 0.6rem; }
            #question-text { font-size: 0.975rem; }
            .option-box { padding: 0.75rem 0.875rem; min-height: 50px; }
            .option-text { font-size: 0.925rem; }
        }

        /* Large desktop tweaks */
        @media (min-width: 1200px) {
            .quiz-sidebar { width: 300px; }
        }
        @media (min-width: 1600px) {
            .quiz-sidebar { width: 320px; padding: 2rem 1.75rem; }
            #question-text { font-size: 1.2rem; }
        }

        /* ── SEPARATOR LINE ── */
        .sep { height: 1px; background: linear-gradient(90deg, transparent, var(--border), transparent); }

        /* ── misc ── */
        .label-xs {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.6rem; letter-spacing: 0.18em;
            text-transform: uppercase; color: #475569; font-weight: 700;
        }
    </style>
</head>
<body>

<div class="grid-bg"></div>

<!-- ─────────────── TOAST CONTAINER ─────────────── -->
<div id="toast-container"></div>

<!-- ─────────────── LOADER ─────────────── -->
<div id="loader-overlay" class="hidden">
    <div style="position:relative;display:flex;align-items:center;justify-content:center;margin-bottom:1.5rem;">
        <div class="loader-ping"></div>
        <div class="loader-ring"></div>
    </div>
    <p id="loader-text" class="font-sci neon-text" style="font-size:0.75rem;letter-spacing:0.25em;animation:blink 1.5s ease-in-out infinite;">ESTABLISHING UPLINK...</p>
</div>

<!-- ─────────────── BLUR WARNING ─────────────── -->
<div id="blur-warning" class="hidden">
    <svg style="width:64px;height:64px;color:var(--danger);margin-bottom:1.25rem;filter:drop-shadow(0 0 16px rgba(255,42,42,0.7));" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/>
    </svg>
    <h2 class="font-sci danger-text" style="font-size:clamp(1.5rem,5vw,2.25rem);letter-spacing:0.15em;margin-bottom:0.5rem;">FOCUS LOST</h2>
    <div style="width:40px;height:2px;background:rgba(255,42,42,0.5);border-radius:999px;margin:0.75rem auto 1rem;"></div>
    <p style="color:#94a3b8;max-width:320px;line-height:1.6;font-size:0.9rem;">Return to the terminal immediately.</p>
    <p style="color:#475569;font-size:0.75rem;margin-top:0.5rem;">AI overlays & screen recording are prohibited.</p>
</div>

<!-- ════════════════════════════════════════
     1. LOGIN SECTION
════════════════════════════════════════ -->
<section id="login-section" class="section-fade">
    <div class="login-card glass">
        <!-- Badge -->
        <div style="text-align:center;margin-bottom:1.75rem;display:flex;flex-direction:column;align-items:center;gap:1rem;">
            <div class="login-badge">
                <span class="badge-dot"></span>
                MCQ Assessment Portal
            </div>
            <h1 class="font-sci neon-text" style="font-size:clamp(1.6rem,7vw,2.25rem);letter-spacing:0.2em;font-weight:900;line-height:1;">AEROQUEST</h1>
            <p class="label-xs" style="color:#334155;letter-spacing:0.25em;">Candidate Authentication</p>
        </div>

        <form id="login-form" style="display:flex;flex-direction:column;gap:1.25rem;">
            <div style="display:flex;flex-direction:column;gap:0.5rem;">
                <label class="label-xs" style="text-align:center;letter-spacing:0.15em;">Identification Roll Number</label>
                <input type="text" id="roll-input" required autocomplete="off" placeholder="E.G. 25U201"
                       class="input-sci"
                       style="width:100%;padding:1rem 1.25rem;text-align:center;letter-spacing:0.2em;font-weight:700;font-size:1.1rem;text-transform:uppercase;">
            </div>

            <button type="submit" class="btn-primary" style="margin-top:0.25rem;">
                <svg style="width:18px;height:18px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                </svg>
                Initiate Sequence
            </button>

            <!-- Warning banner -->
            <div style="border:1px solid rgba(255,42,42,0.3);background:rgba(255,42,42,0.07);border-radius:0.875rem;padding:0.75rem 1rem;display:flex;align-items:center;gap:0.625rem;">
                <span style="font-size:0.875rem;flex-shrink:0;">⚠️</span>
                <p style="font-size:0.7rem;color:var(--danger);text-transform:uppercase;letter-spacing:0.1em;font-weight:700;font-family:'Orbitron',sans-serif;">Device will be locked to this session</p>
            </div>
        </form>

        <!-- Footer -->
        <div style="margin-top:1.5rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,0.06);text-align:center;">
            <p style="font-size:0.65rem;color:#334155;text-transform:uppercase;letter-spacing:0.15em;display:flex;align-items:center;justify-content:center;gap:0.5rem;">
                <svg style="width:12px;height:12px;color:var(--neon);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                </svg>
                End-to-End Encryption Active
            </p>
        </div>
    </div>
</section>

<!-- ════════════════════════════════════════
     2. QUIZ SECTION
════════════════════════════════════════ -->
<section id="quiz-section" class="section-fade hidden" style="background:rgba(3,7,12,0.5);backdrop-filter:blur(4px);">

    <!-- ── LEFT SIDEBAR (desktop) ── -->
    <aside class="quiz-sidebar">

        <!-- Logo -->
        <div class="sidebar-logo">
            <p class="label-xs" style="color:#1e3a5f;">AeroQuest</p>
            <h1 class="font-sci neon-text" style="font-size:1.3rem;letter-spacing:0.15em;font-weight:900;line-height:1;">AEROQUEST</h1>
            <div style="height:1px;background:linear-gradient(90deg,var(--neon),transparent);margin-top:0.25rem;opacity:0.3;"></div>
        </div>

        <!-- Candidate -->
        <div class="candidate-card">
            <p class="label-xs" style="margin-bottom:0.5rem;">Candidate</p>
            <div style="display:flex;align-items:center;gap:0.5rem;">
                <span class="candidate-status"></span>
                <span id="display-roll-desktop" class="font-sci" style="font-size:1.1rem;color:#fff;font-weight:700;letter-spacing:0.1em;">---</span>
            </div>
            <div style="margin-top:0.625rem;height:1px;" class="sep"></div>
            <div style="margin-top:0.625rem;display:flex;justify-content:space-between;align-items:center;">
                <p class="label-xs">Status</p>
                <span style="font-size:0.65rem;color:var(--success);font-family:'Orbitron',sans-serif;font-weight:700;letter-spacing:0.1em;">ACTIVE</span>
            </div>
        </div>

        <!-- Timer -->
        <div class="timer-card">
            <p class="label-xs" style="color:var(--neon);margin-bottom:0.25rem;">Time Remaining</p>
            <div id="timer-desktop" class="font-sci neon-text" style="font-size:2.25rem;font-weight:900;letter-spacing:0.1em;line-height:1;font-variant-numeric:tabular-nums;">10:00</div>
        </div>

        <!-- Question Map -->
        <div class="question-map">
            <p class="label-xs" style="margin-bottom:0.25rem;">Question Map</p>
            <div id="qmap-grid" class="qmap-grid">
                <!-- filled by JS -->
            </div>
        </div>

        <!-- Progress stats -->
        <div style="border:1px solid var(--border);border-radius:0.875rem;padding:0.875rem;background:rgba(0,240,255,0.02);">
            <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                <p class="label-xs">Progress</p>
                <span id="completion-percent-desktop" class="font-sci neon-text" style="font-size:0.65rem;font-weight:700;">0%</span>
            </div>
            <div class="progress-track">
                <div id="progress-fill-desktop" class="progress-fill"></div>
            </div>
        </div>
    </aside>

    <!-- ── MAIN PANEL ── -->
    <div class="quiz-main">

        <!-- Mobile header (shown only on mobile) -->
        <div class="mobile-header" style="justify-content:space-between;align-items:center;">
            <div>
                <p class="label-xs" style="color:#1e3a5f;margin-bottom:0.2rem;">Candidate</p>
                <div style="display:flex;align-items:center;gap:0.4rem;">
                    <span style="width:6px;height:6px;border-radius:50%;background:var(--success);box-shadow:0 0 6px var(--success);display:inline-block;"></span>
                    <span id="display-roll-mobile" class="font-sci" style="font-size:1rem;color:#fff;font-weight:700;letter-spacing:0.1em;">---</span>
                </div>
            </div>
            <div style="text-align:center;border:1px solid rgba(0,240,255,0.2);border-radius:0.75rem;padding:0.375rem 0.875rem;background:rgba(0,240,255,0.04);">
                <p class="label-xs" style="color:var(--neon);margin-bottom:0.1rem;">Time Left</p>
                <div id="timer-mobile" class="font-sci neon-text" style="font-size:1.5rem;font-weight:900;line-height:1;font-variant-numeric:tabular-nums;">10:00</div>
            </div>
        </div>

        <!-- Progress bar & counter -->
        <div class="progress-bar-wrap">
            <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                <span id="question-counter" class="label-xs" style="color:#475569;">Question 1 / X</span>
                <span id="completion-percent-mobile" class="font-sci neon-text" style="font-size:0.6rem;font-weight:700;letter-spacing:0.1em;">0%</span>
            </div>
            <div class="progress-track">
                <div id="progress-fill-mobile" class="progress-fill"></div>
            </div>
        </div>

        <!-- Question + Options -->
        <div class="question-area custom-scroll" id="question-area">

            <div class="question-card">
                <img id="question-image" src="" alt="" class="hidden" style="">
                <p id="question-text">Loading telemetry data...</p>
            </div>

            <div id="options-container"></div>

        </div>

        <!-- Footer Navigation -->
        <div class="quiz-footer">
            <button id="btn-prev" class="btn-nav btn-prev">
                <svg style="width:14px;height:14px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/>
                </svg>
                Prev
            </button>
            <button id="btn-next" class="btn-nav btn-next">
                Next
                <svg style="width:14px;height:14px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
            <button id="btn-submit" class="btn-nav btn-submit hidden" style="font-family:'Orbitron',sans-serif;font-size:0.7rem;font-weight:900;letter-spacing:0.12em;">
                Transmit
                <svg style="width:14px;height:14px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                </svg>
            </button>
        </div>
    </div>
</section>

<!-- ════════════════════════════════════════
     3. RESULT SECTION
════════════════════════════════════════ -->
<section id="result-section" class="section-fade hidden">
    <div class="result-card glass">
        <div style="width:72px;height:72px;border-radius:50%;border:1.5px solid rgba(0,255,170,0.35);background:rgba(0,255,170,0.08);display:flex;align-items:center;justify-content:center;margin:0 auto 1.25rem;box-shadow:0 0 30px rgba(0,255,170,0.18);">
            <svg style="width:36px;height:36px;color:var(--success);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"/>
            </svg>
        </div>
        <h2 class="font-sci" style="font-size:clamp(1.5rem,5vw,2rem);color:#fff;letter-spacing:0.12em;font-weight:900;line-height:1.2;">Simulation<br>Complete</h2>
        <p class="label-xs" style="color:#334155;margin-top:0.625rem;margin-bottom:1.75rem;letter-spacing:0.2em;">Data Encrypted & Transmitted</p>

        <div style="border:1px solid rgba(0,240,255,0.2);border-radius:1.25rem;padding:1.5rem;background:rgba(0,240,255,0.03);margin-bottom:1.5rem;">
            <p class="label-xs" style="margin-bottom:0.375rem;">Final Score</p>
            <div class="font-sci neon-text" style="font-size:3.5rem;font-weight:900;line-height:1;display:flex;align-items:baseline;justify-content:center;gap:0.25rem;">
                <span id="score-display">0</span>
                <span style="font-size:1.5rem;color:#1e3a5f;font-weight:700;">/<span id="total-display">0</span></span>
            </div>
            <div style="width:40px;height:2px;background:rgba(0,240,255,0.3);border-radius:999px;margin:0.875rem auto 0.625rem;"></div>
            <p id="score-message" style="font-size:0.85rem;color:#94a3b8;line-height:1.6;"></p>
        </div>

        <button onclick="window.location.reload()" class="btn-primary">Terminate Session</button>
    </div>
</section>

<!-- ════════════════════════════════════════
     4. LOCKED SECTION
════════════════════════════════════════ -->
<section id="locked-section" class="section-fade hidden">
    <div class="locked-card glass" style="border-color:rgba(255,42,42,0.35);box-shadow:0 0 60px rgba(255,42,42,0.2);">
        <div style="position:absolute;inset:0;border-radius:2rem;background:rgba(255,42,42,0.03);pointer-events:none;"></div>

        <div style="position:relative;z-index:1;">
            <div style="width:72px;height:72px;border-radius:50%;border:1.5px solid rgba(255,42,42,0.35);background:rgba(255,42,42,0.08);display:flex;align-items:center;justify-content:center;margin:0 auto 1.25rem;box-shadow:0 0 30px rgba(255,42,42,0.25);">
                <svg style="width:34px;height:34px;color:var(--danger);animation:blink 1.5s ease-in-out infinite;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                </svg>
            </div>
            <h2 class="font-sci danger-text" style="font-size:clamp(1.5rem,5vw,2rem);letter-spacing:0.15em;font-weight:900;">Session Locked</h2>
            <p style="color:#64748b;font-size:0.8rem;margin-top:0.5rem;margin-bottom:1.5rem;">Critical security violations detected.</p>

            <div style="background:rgba(15,5,5,0.8);border:1px solid rgba(255,42,42,0.2);border-radius:1rem;padding:1rem;text-align:left;margin-bottom:1.5rem;">
                <p class="label-xs" style="color:var(--danger);margin-bottom:0.5rem;display:flex;align-items:center;gap:0.4rem;">
                    <svg style="width:10px;height:10px;" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
                    Violation Log
                </p>
                <p id="lock-reason-text" style="color:#e2e8f0;font-size:0.8rem;line-height:1.6;border-left:2px solid rgba(255,42,42,0.5);padding-left:0.75rem;"></p>
            </div>

            <div style="background:rgba(255,42,42,0.1);border:1px solid rgba(255,42,42,0.25);border-radius:1rem;padding:1.25rem;box-shadow:0 0 20px rgba(255,42,42,0.1);">
                <p class="label-xs" style="color:rgba(255,255,255,0.5);margin-bottom:0.25rem;">Override Required</p>
                <p class="font-sci" style="font-size:1.5rem;color:#fff;font-weight:900;letter-spacing:0.15em;">CALL ADMIN</p>
            </div>
        </div>
    </div>
</section>

<!-- ════════════════════════════════════════
     APPLICATION LOGIC
════════════════════════════════════════ -->
<script>
    // ── CONFIG ──
    const API_URL = "https://script.google.com/macros/s/AKfycbwKC5RH5r5HeoaIga02TCAVPoo3Kk9tIJfHo6p17eUxhCMEZ54-kDSjZ-cRyFbNwIPZ/exec";

    let state = {
        rollNo: '', questions: [], answers: {},
        currentIndex: 0, timeLeft: 0,
        timerInterval: null, isSubmitting: false,
        tabSwitches: 0, violationReason: ''
    };
    let preloadedQuestions = null;

    // ── ELEMENTS ──
    const $ = id => document.getElementById(id);
    const sections = {
        login: $('login-section'), quiz: $('quiz-section'),
        result: $('result-section'), locked: $('locked-section')
    };

    // ── API ──
    async function apiCall(action, payload = {}) {
        const res = await fetch(API_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'text/plain;charset=utf-8' },
            body: JSON.stringify({ action, ...payload })
        });
        if (!res.ok) throw new Error('Network error');
        return res.json();
    }

    // ── PRELOAD QUESTIONS ──
    window.addEventListener('DOMContentLoaded', async () => {
        try {
            const data = await apiCall('getQuestions');
            if (data.success) preloadedQuestions = data.questions;
        } catch(e) {}
    });

    // ── LOGIN ──
    $('login-form').addEventListener('submit', async e => {
        e.preventDefault();
        const roll = $('roll-input').value.trim().toUpperCase();
        if (!roll) return;
        $('roll-input').blur();
        requestFullscreen();
        showLoader('AUTHENTICATING...');
        try {
            const res = await apiCall('login', { roll_no: roll });
            if (res.success) {
                state.rollNo = roll;
                setRollDisplay(roll);
                recoverState(res.time || 10);
                showToast('Authentication Successful', 'success');
                const qs = preloadedQuestions || (await apiCall('getQuestions')).questions;
                if (!qs) throw new Error('No questions found.');
                processQuiz(qs);
            } else {
                showToast(res.message || 'Access Denied', 'error');
                hideLoader();
            }
        } catch(err) {
            showToast(err.message, 'error');
            hideLoader();
        }
    });

    function setRollDisplay(roll) {
        $('display-roll-desktop').textContent = roll;
        $('display-roll-mobile').textContent = roll;
    }

    // ── PROCESS QUIZ ──
    function processQuiz(qs) {
        state.questions = shuffleArray([...qs]);
        state.questions.forEach(q => {
            const opts = [
                { id: 'A', text: q.optionA }, { id: 'B', text: q.optionB },
                { id: 'C', text: q.optionC }, { id: 'D', text: q.optionD }
            ].filter(o => o.text && o.text.toString().trim());
            q.shuffledOptions = shuffleArray(opts);
        });
        buildQuestionMap();
        hideLoader();
        switchSection('quiz');
        startTimer();
        renderQuestion();
    }

    // ── QUESTION MAP (desktop sidebar) ──
    function buildQuestionMap() {
        const grid = $('qmap-grid');
        grid.innerHTML = '';
        state.questions.forEach((q, i) => {
            const btn = document.createElement('button');
            btn.className = 'qmap-btn';
            btn.textContent = i + 1;
            btn.dataset.idx = i;
            btn.addEventListener('click', () => {
                state.currentIndex = i;
                renderQuestion();
            });
            grid.appendChild(btn);
        });
    }

    function updateQuestionMap() {
        const btns = document.querySelectorAll('.qmap-btn');
        btns.forEach((btn, i) => {
            const q = state.questions[i];
            btn.className = 'qmap-btn';
            if (state.answers[q.id]) btn.classList.add('answered');
            if (i === state.currentIndex) btn.classList.add('current');
        });
    }

    // ── RENDER ──
    function renderQuestion() {
        const q = state.questions[state.currentIndex];
        const total = state.questions.length;

        $('question-counter').textContent = `Question ${state.currentIndex + 1} / ${total}`;
        const answered = Object.keys(state.answers).length;
        const pct = Math.round((answered / total) * 100);
        $('completion-percent-desktop').textContent = pct + '%';
        $('completion-percent-mobile').textContent = pct + '%';
        $('progress-fill-desktop').style.width = pct + '%';
        $('progress-fill-mobile').style.width = pct + '%';

        $('question-text').textContent = q.question;

        const img = $('question-image');
        if (q.image && q.image.trim()) {
            img.src = q.image.trim();
            img.classList.remove('hidden');
        } else {
            img.src = ''; img.classList.add('hidden');
        }

        $('options-container').innerHTML = '';
        const letters = ['A', 'B', 'C', 'D'];
        q.shuffledOptions.forEach((opt, idx) => {
            const checked = state.answers[q.id] === opt.id ? 'checked' : '';
            $('options-container').insertAdjacentHTML('beforeend', `
                <label class="option-label">
                    <input type="radio" name="q_${q.id}" value="${opt.id}" class="option-input" ${checked}
                           onchange="selectAnswer('${q.id}','${opt.id}')">
                    <div class="option-box">
                        <div class="radio-outer"><div class="radio-inner"></div></div>
                        <span class="option-letter">${letters[idx]}</span>
                        <span class="option-text">${opt.text}</span>
                    </div>
                </label>
            `);
        });

        $('question-area').scrollTop = 0;

        // Prev button
        $('btn-prev').disabled = state.currentIndex === 0;

        // Next / Submit toggle
        if (state.currentIndex === total - 1) {
            $('btn-next').classList.add('hidden');
            $('btn-submit').classList.remove('hidden');
        } else {
            $('btn-next').classList.remove('hidden');
            $('btn-submit').classList.add('hidden');
        }

        checkSubmit();
        updateQuestionMap();
    }

    window.selectAnswer = function(qId, opt) {
        state.answers[qId] = opt;
        saveState();
        checkSubmit();
        updateQuestionMap();
        const total = state.questions.length;
        const answered = Object.keys(state.answers).length;
        const pct = Math.round((answered / total) * 100);
        $('completion-percent-desktop').textContent = pct + '%';
        $('completion-percent-mobile').textContent = pct + '%';
        $('progress-fill-desktop').style.width = pct + '%';
        $('progress-fill-mobile').style.width = pct + '%';
    };

    function checkSubmit() {
        const done = Object.keys(state.answers).length === state.questions.length;
        $('btn-submit').disabled = !done;
        $('btn-submit').classList.toggle('pulse', done);
    }

    $('btn-next').addEventListener('click', () => {
        if (state.currentIndex < state.questions.length - 1) {
            state.currentIndex++;
            renderQuestion();
        }
    });

    $('btn-prev').addEventListener('click', () => {
        if (state.currentIndex > 0) {
            state.currentIndex--;
            renderQuestion();
        }
    });

    $('btn-submit').addEventListener('click', () => submitQuiz(false));

    // ── SUBMIT ──
    async function submitQuiz(isAuto = false, isCheat = false, reason = '') {
        if (state.isSubmitting) return;
        state.isSubmitting = true;
        clearInterval(state.timerInterval);
        if (isCheat) state.answers = {};
        else if (isAuto) showToast('Time Expired! Auto-submitting...', 'warning');
        showLoader('TRANSMITTING DATA...');
        try {
            const res = await apiCall('submit', { roll_no: state.rollNo, answers: state.answers });
            if (res.success) {
                localStorage.removeItem(`aeroQuiz_${state.rollNo}`);
                hideLoader(); exitFullscreen();
                if (isCheat) {
                    $('lock-reason-text').textContent = reason || state.violationReason || 'Multiple security violations.';
                    switchSection('locked');
                } else {
                    $('score-display').textContent = res.score;
                    $('total-display').textContent = res.total || state.questions.length;
                    const r = res.score / (res.total || state.questions.length);
                    if (r >= 0.8) $('score-message').innerHTML = 'Outstanding Performance. <span style="color:var(--neon);font-weight:700;">Cleared for Advanced Operations.</span>';
                    else if (r >= 0.5) $('score-message').textContent = 'Standard Parameters Met.';
                    else $('score-message').innerHTML = '<span style="color:var(--danger);font-weight:700;">Parameters Failed. Remedial training required.</span>';
                    switchSection('result');
                }
            } else { throw new Error(res.message || 'Transmission failed.'); }
        } catch(err) {
            showToast(err.message, 'error');
            state.isSubmitting = false;
            hideLoader();
        }
    }

    // ── TIMER ──
    function startTimer() {
        updateTimer();
        state.timerInterval = setInterval(() => {
            state.timeLeft--;
            saveState(); updateTimer();
            if (state.timeLeft <= 0) { clearInterval(state.timerInterval); submitQuiz(true); }
            else if (state.timeLeft === 60) {
                showToast('WARNING: 60 SECONDS REMAINING', 'warning');
                [$('timer-desktop'), $('timer-mobile')].forEach(el => {
                    el.style.color = 'var(--danger)';
                    el.style.textShadow = '0 0 12px rgba(255,42,42,0.7)';
                    el.style.animation = 'blink 1s ease-in-out infinite';
                });
            }
        }, 1000);
    }

    function updateTimer() {
        const m = Math.floor(state.timeLeft / 60).toString().padStart(2, '0');
        const s = (state.timeLeft % 60).toString().padStart(2, '0');
        const txt = `${m}:${s}`;
        $('timer-desktop').textContent = txt;
        $('timer-mobile').textContent = txt;
    }

    // ── STATE ──
    function saveState() {
        if (!state.rollNo) return;
        localStorage.setItem(`aeroQuiz_${state.rollNo}`, JSON.stringify({
            answers: state.answers, timeLeft: state.timeLeft,
            tabSwitches: state.tabSwitches, violationReason: state.violationReason
        }));
    }

    function recoverState(def) {
        const saved = localStorage.getItem(`aeroQuiz_${state.rollNo}`);
        if (saved) {
            try {
                const p = JSON.parse(saved);
                state.answers = p.answers || {};
                state.tabSwitches = p.tabSwitches || 0;
                state.violationReason = p.violationReason || '';
                state.timeLeft = p.timeLeft > 0 ? p.timeLeft : def * 60;
            } catch(e) { state.timeLeft = def * 60; }
        } else { state.timeLeft = def * 60; }
    }

    // ── ANTI-CHEAT ──
    document.addEventListener('contextmenu', e => e.preventDefault());
    ['copy','cut','paste','dragstart','drop'].forEach(ev => document.addEventListener(ev, e => e.preventDefault()));
    document.addEventListener('selectstart', e => { if (e.target.tagName !== 'INPUT') e.preventDefault(); });

    let lastViolation = 0;

    function securityViolation(reason) {
        if (state.isSubmitting || sections.quiz.classList.contains('hidden')) return;
        const now = Date.now();
        if (now - lastViolation < 1500) return;
        lastViolation = now;
        state.tabSwitches++;
        state.violationReason = reason;
        saveState();
        if (state.tabSwitches >= 3) { submitQuiz(false, true, reason); }
        else {
            const left = 3 - state.tabSwitches;
            showToast(`SECURITY ALERT: ${reason} — ${left} strike(s) left`, 'error');
        }
    }

    document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'hidden') {
            if (!state.isSubmitting && !sections.quiz.classList.contains('hidden')) {
                sections.quiz.style.visibility = 'hidden';
                $('blur-warning').classList.remove('hidden');
            }
            securityViolation('Application backgrounded or tab switched.');
        } else {
            if (state.tabSwitches < 3) {
                sections.quiz.style.visibility = 'visible';
                $('blur-warning').classList.add('hidden');
            }
        }
    });

    window.addEventListener('blur', () => {
        if (!state.isSubmitting && !sections.quiz.classList.contains('hidden')) {
            sections.quiz.style.visibility = 'hidden';
            $('blur-warning').classList.remove('hidden');
        }
        securityViolation('Focus lost — possible screen capture or AI overlay.');
    });

    window.addEventListener('focus', () => {
        if (state.tabSwitches < 3) {
            sections.quiz.style.visibility = 'visible';
            $('blur-warning').classList.add('hidden');
        }
    });

    window.addEventListener('beforeunload', e => {
        if (!state.isSubmitting && state.rollNo && sections.result.classList.contains('hidden') && sections.locked.classList.contains('hidden')) {
            e.preventDefault(); e.returnValue = '';
        }
    });

    // ── FULLSCREEN ──
    function requestFullscreen() {
        const el = document.documentElement;
        (el.requestFullscreen || el.webkitRequestFullscreen || (() => {})).call(el);
    }
    function exitFullscreen() {
        (document.exitFullscreen || document.webkitExitFullscreen || (() => {})).call(document);
    }

    // ── UI HELPERS ──
    function switchSection(id) {
        Object.values(sections).forEach(s => {
            s.classList.add('hidden');
            s.style.opacity = '0';
        });
        const sec = sections[id];
        sec.classList.remove('hidden');
        $('blur-warning').classList.add('hidden');
        requestAnimationFrame(() => {
            sec.style.transition = 'opacity 0.4s ease';
            sec.style.opacity = '1';
        });
    }

    function showLoader(text) {
        $('loader-text').textContent = text;
        $('loader-overlay').classList.remove('hidden');
    }

    function hideLoader() {
        $('loader-overlay').classList.add('hidden');
    }

    function showToast(msg, type = 'info') {
        const tc = $('toast-container');
        const t = document.createElement('div');
        const themes = {
            error:   'border:1px solid rgba(255,42,42,0.4);background:rgba(20,5,5,0.95);color:#fca5a5;',
            warning: 'border:1px solid rgba(255,160,0,0.4);background:rgba(20,15,5,0.95);color:#fcd34d;',
            success: 'border:1px solid rgba(0,255,170,0.3);background:rgba(5,20,15,0.95);color:#6ee7b7;',
            info:    'border:1px solid rgba(0,240,255,0.3);background:rgba(5,15,25,0.95);color:#67e8f9;'
        };
        const icons = { error:'⚠️', warning:'⚡', success:'✅', info:'ℹ️' };
        t.className = 'toast';
        t.style.cssText = themes[type] || themes.info;
        t.innerHTML = `<span style="font-size:1rem;flex-shrink:0;">${icons[type]||'ℹ️'}</span>
            <span style="font-size:0.72rem;font-family:'Orbitron',sans-serif;font-weight:700;letter-spacing:0.08em;text-transform:uppercase;line-height:1.5;">${msg}</span>`;
        tc.appendChild(t);
        setTimeout(() => { t.classList.add('out'); setTimeout(() => t.remove(), 350); }, 4200);
    }

    function shuffleArray(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }
</script>
</body>
</html>
